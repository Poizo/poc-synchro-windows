(()=>{"use strict";class e{constructor(){return this.moves=[],this.moves=[],this}moveTo(e,t){return this.moves.push(`M ${e} ${t}`),this}closePath(){return this.moves.push("Z"),this}lineTo(e,t){return this.moves.push(`L ${e} ${t}`),this}horizontalLineTo(e){return this.moves.push(`H ${e}`),this}verticalLineTo(e){return this.moves.push(`V ${e}`),this}curveTo(e,t,o,s,n,r){return this.moves.push(`C ${e} ${t} ${o} ${s} ${n} ${r}`),this}smoothCurveTo(e,t,o,s){return this.moves.push(`S ${e} ${t} ${o} ${s}`),this}quadraticCurveTo(e,t,o,s){return this.moves.push(`Q ${e} ${t} ${o} ${s}`),this}smoothQuadraticCurveTo(e,t){return this.moves.push(`T ${e} ${t}`),this}arc(e,t,o,s,n,r,i){const c=s?1:0,a=n?1:0;return this.moves.push(`A ${e} ${t} ${o} ${c} ${a} ${r} ${i}`),this}catmullRomCurveTo(e,t,o,s){return this.moves.push(`R ${e} ${t} ${o} ${s}`),this}toString(){return this.moves.join(" ")}}document.querySelector(".stats");const t=document.querySelector(".clear"),o=document.querySelector(".video"),s=document.querySelector("svg"),n=document.querySelector("svg path");function r(){return Object.entries(window.localStorage).filter((([e])=>e.startsWith("screen-"))).map((([e,t])=>[e,JSON.parse(t)]))}const i=`screen-${(Object.keys(window.localStorage).filter((e=>e.startsWith("screen-"))).map((e=>parseInt(e.replace("screen-","")))).sort(((e,t)=>e-t)).at(-1)||0)+1||1}`;const c=[];t?.addEventListener("click",(function(){console.log(c),c.forEach((e=>window.clearInterval(e))),window.localStorage.clear(),setTimeout((()=>window.location.reload()),1e3*Math.random())})),window.addEventListener("beforeunload",(function(){console.log(`removing screen ${i}`),localStorage.removeItem(i)})),console.log("Go!"),c.push(setInterval((function(){const e={screenX:window.screenX,screenY:window.screenY,screenWidth:window.screen.availWidth,screenHeight:window.screen.availHeight,width:window.outerWidth,height:window.innerHeight,updated:Date.now()};window.localStorage.setItem(i,JSON.stringify(e))}),5e3)),c.push(setInterval((function(){const e=r();for(const[t,o]of e)Date.now()-o.updated>1e3&&localStorage.removeItem(t)}),100)),c.push(setInterval((function(){console.log("makeSVG");const t=new e;s?.setAttribute("viewBox",`0 0 ${window.screen.availWidth} ${window.screen.availHeight}`),s?.setAttribute("width",`${window.screen.availWidth}px`),s?.setAttribute("height",`${window.screen.availHeight}px`),s?.setAttribute("style",`transform: translate(${-window.screenX}px, ${-window.screenY}px)`),o?.setAttribute("style",`transform: translate(${-window.screenX}px, ${-window.screenY}px)`),r().map((([e,t])=>{const o=t.screenX+t.width/2,s=t.screenY+t.height/2;return[e,{...t,x:o,y:s}]})).forEach((([e,o],s)=>{console.log(o),0===s?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y)})),t.closePath(),n?.setAttribute("d",t.toString())}),5e3)),navigator.mediaDevices.getUserMedia({video:!0}).then((e=>{o?(o.width=window.screen.availWidth,o.height=window.screen.availHeight,o.srcObject=e,o.play()):console.log("no video !")}))})();